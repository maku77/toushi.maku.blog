<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>MetaTrader/MQL: カスタムインジケーター on 投資で実現！不労所得生活</title><link>https://memoja.net/p/br2airy/</link><description>Recent content in MetaTrader/MQL: カスタムインジケーター on 投資で実現！不労所得生活</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><lastBuildDate>Sun, 14 Jun 2015 00:00:00 +0000</lastBuildDate><atom:link href="https://memoja.net/p/br2airy/index.xml" rel="self" type="application/rss+xml"/><item><title>MetaTrader/MQL: カスタムインジケータを作成する</title><link>https://memoja.net/p/5q5gs5g/</link><pubDate>Sun, 01 Feb 2015 00:00:00 +0000</pubDate><guid>https://memoja.net/p/5q5gs5g/</guid><description>カスタムインジケータの作成 ここでは、最初のステップとして、ローソク足の終値をラインで結ぶだけのカスタムインジケータを作成してみます。 Meta Editor 上で Control + N を押して、Custom Indicator を選択すると、カスタムインジケータのファイルを新規作成することができます。
MyIndicator.mt4 #property strict #property indicator_chart_window #property indicator_buffers 1 #property indicator_plots 1 // Default properties for Line 1 #property indicator_label1 &amp;#34;Line 1&amp;#34; #property indicator_type1 DRAW_LINE #property indicator_color1 clrRed #property indicator_style1 STYLE_SOLID #property indicator_width1 1 // Buffer for indicator line double gBuffer[]; int OnInit() { SetIndexBuffer(0, gBuffer, INDICATOR_DATA); return INIT_SUCCEEDED; } int OnCalculate( const int rates_total, // ローソク足の数 const int prev_calculated, // 前回の OnCalculate() の戻り値 const datetime &amp;amp;time[], // ローソク足ごとの時刻 [0.</description></item><item><title>MetaTrader/MQL: カスタムインジケータに水平線を表示する</title><link>https://memoja.net/p/fsy7djp/</link><pubDate>Sun, 14 Jun 2015 00:00:00 +0000</pubDate><guid>https://memoja.net/p/fsy7djp/</guid><description>IndicatorSetXxx() 系の関数を使用して、インジケータに水平線を表示することができます。 下記の例では、0.1 と -0.1 の値の位置に水平線を表示しています（0.0 の位置には、デフォルトで水平線が表示されるようです）。
void InitLevelLines() { // The number of horizontal lines. IndicatorSetInteger(INDICATOR_LEVELS, 2); // First line settings. IndicatorSetString(INDICATOR_LEVELTEXT, 0, &amp;#34;Upper line&amp;#34;); IndicatorSetDouble(INDICATOR_LEVELVALUE, 0, 0.1); IndicatorSetInteger(INDICATOR_LEVELSTYLE, 0, STYLE_DASHDOT); IndicatorSetInteger(INDICATOR_LEVELCOLOR, 0, clrPink); IndicatorSetInteger(INDICATOR_LEVELWIDTH, 0, 1); // Second line settings. IndicatorSetString(INDICATOR_LEVELTEXT, 1, &amp;#34;Lower line&amp;#34;); IndicatorSetDouble(INDICATOR_LEVELVALUE, 1, -0.1); IndicatorSetInteger(INDICATOR_LEVELSTYLE, 1, STYLE_DASHDOT); IndicatorSetInteger(INDICATOR_LEVELCOLOR, 1, clrPink); IndicatorSetInteger(INDICATOR_LEVELWIDTH, 1, 1); } int OnInit() { // ... InitLevelLines(); // ... return INIT_SUCCEEDED; }</description></item><item><title>MetaTrader/MQL: カスタムインジケータで使用できるイベント</title><link>https://memoja.net/p/ugs5fq2/</link><pubDate>Wed, 10 Jun 2015 00:00:00 +0000</pubDate><guid>https://memoja.net/p/ugs5fq2/</guid><description>カスタムインジケータのプログラム内で、決まったシグネチャで関数を定義しておくと、特定のイベント発生時に自動的にその関数を呼び出してくれるようになります。
OnInit 関数 int OnInit()
インジケータが最初にチャートにアタッチされたとき チャートのシンボル（USDJPY など）やタイムフレーム（時間足）が変更されたとき MetaEditor 上でインジケータが再コンパイルされたとき インジケータの入力パラメータがダイアログから変更されたとき OnDeinit 関数 void OnDeinit(const int reason)
チャートからインジケータをデタッチしたとき (REASON_REMOVE (1)) MetaEditor 上でインジケータが再コンパイルされたとき (REASON_RECOMPILE (2)) チャートのシンボル（USDJPY など）やタイムフレーム（時間足）が変更されたとき (REASON_CHARTCHANGE (3)) チャートを閉じたとき (REASON_CHARTCLOSE (4)) インジケータの入力パラメータがダイアログから変更されたとき (REASON_PARAMETERS (5)) OnInit() が 0 以外の値を返して失敗したとき (REASON_INITFAILED (8)) MetaTrader（ターミナル）を閉じたとき (REASON_CLOSE (9)) パラメータの reason にどのような値が渡されるかは、下記にまとめられています。
Uninitialization Reason Codes パラメータの const を省略して int reason と記述したりすると、ちゃんと呼び出されないので注意してください。
OnCalculate 関数 void OnCalculate(&amp;hellip;)
OnCalculate() は Tick ごと（最新の価格が変化するごと）に呼び出されます。 インジケータを最初にチャートにアタッチしたときにも呼び出されます。</description></item><item><title>MetaTrader/MQL: インジケータの実装例 - SMA（単純移動平均）</title><link>https://memoja.net/p/h3fr3do/</link><pubDate>Sun, 01 Feb 2015 00:00:00 +0000</pubDate><guid>https://memoja.net/p/h3fr3do/</guid><description>移動平均線のカスタムインジケータを作成する 単純移動平均線 (SMA: Simple Moving Average) を表示するためのインジケータはデフォルトで用意されていますが、ここでは勉強のためにインジケータを自作してみます。
MySma.mt4 #property description &amp;#34;My Moving Average&amp;#34; #property strict #property indicator_chart_window #property indicator_buffers 1 #property indicator_plots 1 // Indicator settings #property indicator_label1 &amp;#34;MA&amp;#34; #property indicator_type1 DRAW_LINE #property indicator_color1 clrRed #property indicator_style1 STYLE_SOLID #property indicator_width1 1 // Input parameters input int gPeriod = 7; // MA Period // Indicator buffers double gMaBuffer[]; int OnInit() { if (gPeriod &amp;lt;= 0) { Alert(&amp;#34;Period must be larger than 0&amp;#34;); return INIT_PARAMETERS_INCORRECT; } SetIndexBuffer(0, gMaBuffer); IndicatorShortName(&amp;#34;MA(&amp;#34; + gPeriod + &amp;#34;)&amp;#34;); return INIT_SUCCEEDED; } /** * [Utility] * How many candles should be re-calculated.</description></item><item><title>MetaTrader/MQL: インジケータの実装例 - WMA（加重移動平均）</title><link>https://memoja.net/p/f2eq2dp/</link><pubDate>Wed, 10 Jun 2015 00:00:00 +0000</pubDate><guid>https://memoja.net/p/f2eq2dp/</guid><description>WMA: Weighted Moving Average（加重移動平均線）は、直前の価格ほど重みをおいた移動平均線です。 考え方は EMA（指数平滑移動平均線）に近いのですが、WMA の方が計算はシンプルです。 例えば、5 WMA は以下のように求められます。
下記の値を合計する 1 つ前の値 x 5 2 つ前の値 x 4 3 つ前の値 x 3 4 つ前の値 x 2 5 つ前の値 x 1 これを 15 (1+2+3+4+5) で割る MyWma.mq4 #property copyright &amp;#34;Maku&amp;#34; #property link &amp;#34;http://www.mql5.com&amp;#34; #property version &amp;#34;1.00&amp;#34; #property strict // Chart settings #property indicator_chart_window #property indicator_buffers 1 #property indicator_plots 1 // Each indicator settings #property indicator_type1 DRAW_LINE #property indicator_style1 STYLE_SOLID #property indicator_width1 1 #property indicator_color1 clrPink // Input parameters input int gPeriod = 25; // Period of WMA // Indicator buffers double gWmaBuffer[]; /** * [Utility] * How many candles should be re-calculated.</description></item><item><title>MetaTrader/MQL: インジケータの実装例 - Momentum（モメンタム）</title><link>https://memoja.net/p/3emsz6c/</link><pubDate>Sun, 14 Jun 2015 00:00:00 +0000</pubDate><guid>https://memoja.net/p/3emsz6c/</guid><description>モメンタムは下記の計算式で求められます。
モメンタム = 現在の価格 - X日前の価格 ある一定期間前の価格と比べ、現在の価格がどれだけ上下しているかを示すため、相場の勢いを知るために使用されます。 どれくらい前の価格と比較するかは、一般的に下記のような値が使用されます。
日足の場合 &amp;hellip; 10日、25日 週足の場合 &amp;hellip; 9週、13週、26週 月足の場合 &amp;hellip; 3ヶ月、6ヶ月、9ヶ月 モメンタムは価格の差分を表すため、通常は下記のように別ウィンドウに表示します。
Momentum.mq4 #property copyright &amp;#34;Maku&amp;#34; #property version &amp;#34;1.00&amp;#34; // Global settings #property description &amp;#34;Momentum&amp;#34; #property strict #property indicator_separate_window #property indicator_buffers 1 #property indicator_plots 1 // Indicator settings #property indicator_type1 DRAW_LINE #property indicator_color1 clrCyan #property indicator_style1 STYLE_SOLID #property indicator_width1 1 // Input parameters input int gPeriod = 25; // Momentum Period // Indicator bufferes double gMomentumBuffer[]; // Initialize the indicator.</description></item></channel></rss>